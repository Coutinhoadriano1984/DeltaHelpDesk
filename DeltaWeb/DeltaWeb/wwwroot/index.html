<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeltaWeb</title>
    <base href="/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="DeltaWeb.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">üóô</a>
    </div>

    <div id="cookie-consent" class="cookie-banner">
        <p>
            Este site utiliza cookies para garantir que voc√™ tenha a melhor experi√™ncia. Ao continuar navegando, voc√™ concorda com o uso de cookies. Para mais detalhes, acesse nossa <a href="/politica-de-privacidade">Pol√≠tica de Privacidade</a>.
        </p>
        <div class="cookie-actions">
            <button onclick="acceptCookies()" class="btn btn-primary btn-sm">Aceitar e Continuar</button>
            <button onclick="dismissCookies()" class="btn btn-secondary btn-sm">Rejeitar</button>
        </div>
    </div>

    <script src="_framework/blazor.webassembly.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/app.js"></script>


    <script>
        // ESTE BLOCO J√Å EST√Å OK PARA O CHART.JS
        function drawCategoryChart(labels, data) {
            const ctx = document.getElementById('categoryChart');
            if (!ctx) return;

            if (window.categoryChartInstance) {
                window.categoryChartInstance.destroy();
            }

            window.categoryChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Volume de Chamados',
                        data: data,
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(255, 206, 86, 0.5)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 206, 86, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // LGPD FUNCTIONS
        const cookieBanner = document.getElementById('cookie-consent');

        window.acceptCookies = function () {
            cookieBanner.classList.add('hidden');
            console.log("Cookies aceitos (somente nesta sess√£o).");
        };

        window.dismissCookies = function () {
            cookieBanner.classList.add('hidden');
            console.log("Cookies rejeitados (somente nesta sess√£o).");
        };
    </script>

    <script>navigator.serviceWorker.register('service-worker.js');</script>
</body>

</html>